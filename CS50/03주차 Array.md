2021.09.27

------

## 3장

#### Array 배열

```c
#include <stdio.h>
int main(void)
{
    printf("Hello, World\n");
}
```

main이라는 함수는 프로그램의 시작점으로써 **실행 버튼을 클릭**하는 것과 같은 기능

printf는 출력을 담당하는 함수로, stdio.h 라는 라이브러리가 필요함.

studio.h는 헤더 파일로 C언어오 작성되어 있으면 파일명이 .h 로 끝나는 파일. 이 파일에는 printf 함수의 프로토타입이 있어서 Clang 컴파일러가 프로그램을 컴파일할때 printf가 무엇인지 알려주는 역할을 한다.



코드를 clang hello.c로 컴파일 하고 .a/.out 명령으로 프로그램을 실행할 때, 이 과정은 컴퓨터가 이해하는 0과1로 변환된 파일 a.out을 생성하여 실행.

a.out을 다른 이름으로 컴파일 하고 싶다면 아래와 같이 명령행 인자를 추가

```
clang -o hello hello.c
```

 CS50 라이브러리를 사용한 프로그램을 컴파일 할때는 clang에 또 하나의 프로그램 -lcs50이 필요함.

```
clang -o hello hello.c -lcs50
```

clang에세 CS50 라이브러리에 있는 모든 0과 1을 이곳에 연결하라는 의미.

더 간단하게는 make 프로그램을 이용하여 모든 컴파일 과정을 자동으로 처리할 수 있다.

make나 clang을 사용해서 프로그램을 실핼할 때 네 단계를 거친다.

1. 전처리
2. 컴파일링
3. 어셈블링
4. 링킹



1. 전처리(Precompile)

   컴파일의 첫 번째 단계는 **전처리**로 전처리기에 의해 수행된다.

   #으로 시작되는 C소스 코드는 전처리기에게 **실질적인 컴파일이 이루어지기 전에 무언가를 실행**하도록 알려준다.

   ex) #include는 전처리기에게 다른 파일의 내용을 포함 시키라고 알려주는 역할을 한다. 프로그램의 소스 코드에 #include와 같은 줄을 포함하면, 전처리기는 새로운 파일을 생성하는데 이 파일은 여전히 C소스 코드 형태이며, stdio.h 파일의 내용이 #include 부분에 포함된다.

2. 컴파일(Compile)

   전처리기가 전처리한 소스 코드를 생성하고 그 다음 단계로 컴파일을 한다. 컴파일러라고 불리는 프로그램은 C코드를 어셈블리서라는 저수준의 프로그래밍 언어로 컴파일한다.

   어셈블리는 C보다 연산의 종류가 훨씬 적지만, 여러 연산들이 함께 사용되면 C에서 할 수 있는 모든 것들을 수행할 수 있다. C코드를 어셈블리 코드로 변환시켜줌으로써 컴파일러는 컴퓨터가 이해할 수 있는 언어와 최대한 가까운 프로그램으로 만들어줌.

3. 어셈블(Assemble)

   소스 코드가 어셈블리 코드로 변한되면, 어셈블리 코드를 오브젝트 코드로 변환 시킴. 컴퓨터의 중앙처리장치가 프로그램을 어떻게 수행해야 하는지 알 수 있는 명령어 형태인 연속된 0과 1들로 바꿔주는 작업이다. 소스 코드에서 오브젝트 코드로 컴파일 되어야 할 파일이 딱 한개라면, 컴파일 작업은 여기서 끝나지만 그렇지 않은 경우에는 링크라고 불리는 단계가 추가된다.

4. 링크(Link)

   프로그램이 여러개의 파일로 이루어져 있어 하나의 오브젝트 파일로 합쳐져야 할 때, 링크라는 컴파일의 마지막 단계를 필요로 한다, 링커는 여러개의 다른 오브제그 코드 파일을 실행 가능한 하나의 오브젝트 코드 파일로 합쳐준다.

   ex) 컴파일 하는 도안 CS50 라이브러리를 링크하면 오브젝트 코드는 Getlnt( )나 GetString( ) 같은 함수를 어떻게 실행할지 알 수 있게 된다.

위의 네 단계를 거치면 최종적으로 실행 가능한 파일이 완성된다.



















